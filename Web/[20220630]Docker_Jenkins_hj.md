# CI / CD

## CI 란?

빌드/ 테스트 자동화 과정으로 개발자를 위한 자동화 프로세스인 지속적인 통합(Continuous Integration)을 의미한다.

지속적 통합의 실행은 소스/버전 관리 시스템에 대한 변경 사항을 정기적으로 커밋하여 모든 사람에게 동일 작업 기반을 제공하는 것으로 시작한다. 커밋할 때마다 빌드와 일련의 자동 테스트가 이루어져 동작을 확인하고 변경으로 인해 문제가 생기는 부분이 없도록 보장한다. 지속적 통합은 그 자체로 유익하지만 CI/CD 파이프라인을 구현하기 위한 첫 번째 단계이기도 하다.

## CD 란?

배포자동화 과정으로 지속적인 서비스제공(Continuous Delivery) 또는 지속적인 배포(Continuous Deployment)를 의미하며, 상호교환적으로 사용된다.

코드 변경이 파이프라인의 이전 단계를 모두 성공적으로 통과하면 수동 개입 없이 해당 변경 사항이 프로덕션에 자동으로 배포된다.

간단한 코드 변경이 정기적으로 마스터에 커밋되고, 자동화된 빌드 및 테스트 프로세스를 거치며 다양한 사전 프로덕션 환경으로 승격되며, 문제가 발견되지 않으면 최종적으로 배포된다.

# 도커(Docker)

도커는 컨테이너 기반의 오픈소스 가상화 플랫폼이다.

**가상화**란 물리적 자원인 하드웨어를 효율적으로 활용하기 위해서 하드웨어 공간 위에 가상의 머신을 만드는 기술이고, **컨테이너**란 컨테이너가 실행되고 있는 호스트 os의 기능을 그대로 사용하면서 프로세스를 격리해 독립된 환경을 만드는 기술을 뜻한다.

도커의 컨테이너는 가상머신에 비해 꼭 필요한 것만 담겨서 구동된다는 차이가 있다. 즉, 컨테이너에 필요한 커널은 호스트의 커널과 공유해서 사용하고, 컨테이너 안에는 애플리케이션을 구동하는데 필요한 라이브러리 및 실행파일만 존재하기 때문에 컨테이너를 이미지로 만들경우 용량이 대폭 줄어든다.

다시 말하자면, 도커는 **독립된 환경을 만들어서 하드웨어를 효율적으로 활용하는 기술**이다.

**이미지**는 가상 머신이나 컨테이너 또는 프로그램을 실행하는 데 필요한 파일과 라이브러리, 설정 등을 가지고 있는 파일이다. 이미지는 레이어라는 계층 구조로 이루어져 있는데, 변경 사항이 생기면 새로운 레이어를 추가해서 기록한다. 이미지 전체를 새로 받지 않고 해당 레이어만 받는 것으로 이미지를 업데이트할 수 있다는 장점이 있다.

이미지를 실행하면 프로세스, 즉 컨테이너가 된다.

도커를 이용하면 이미지를 실행시켜 컨테이너로 만들거나, 생성된 컨테이너를 관리하거나, 컨테이너를 다시 이미지로 만드는 작업을 쉽게 할 수 있다. 개발 과정에서 다른 라이브러리와 충돌하는 것을 방지하기 위해 격리된 환경이 필요할 때, 완성된 서비스를 배포할 때, 혹은 배포 중인 서비스를 받아서 실행해 볼 때도 유용하다.

**장점**

1. 가장 큰 장점은 역시 애플리케이션 **독립성**이다. 호스트 OS와도, 다른 컨테이너와도 독립된 공간을 보장받을 수 있기 때문에 충돌 발생 염려가 전혀 없다.
2. 또한 컨테이너 내부에 작업을 한 후에 **배포**하려고 한다면 도커 이미지라는 패키지로 만들어서 운영서버에 전달만 하면 된다. 즉, 배포가 쉬워진다.
3. 모놀리식 애플리케이션 방식에서 **마이크로서비스** 구조로 변화가 쉽다. 즉, 컨테이너 하나당 하나의 기능만을 제공하는 모듈로 만들어서 부하가 많은 모듈은 여러개 더 만들고 하는 조정이 가능해진다.

# 젠킨스(Jenkins)

모든 언어의 조합과 소스 코드 레포지토리에 대한 **지속적인 통합(Continuous integration, CI)**
과 지속적 배포(continuous delivery, CD) 환경을 구축하기 위한 도구이다. 
빌드, 테스트, 배포 프로세스를 자동화하여 소프트웨어 품질과 개발 생산성을 높일 수 있다.

젠킨스를 이용한 CI/CD 과정

![Untitled](https://user-images.githubusercontent.com/87989933/176586993-8814c9fd-c2ce-42da-957d-d5db9528f6cb.png)

1. 로컬에서 개발 후 깃허브로 커밋 및 푸시
2. 젠킨스가 이를 인지하여 빌드 및 테스트
3. 빌드가 성공할 경우 배포 서버로 전송
4. 빌드가 실패할 경우 로그를 남기고 알림

젠킨스의 이점

- 프로젝트 표준 컴파일 환경에서의 컴파일 오류 검출
- 자동화 테스트 수행
- 정적 코드 분석에 의한 코딩 규약 준수여부 체크
- 프로파일링 툴을 이용한 소스변경에 따른 성능변화 감시
- 결합 테스트 환경에 대한 배포작업

## 참고

[https://velog.io/@markany/도커에-대한-어떤-것-1.-도커란-무엇인가](https://velog.io/@markany/%EB%8F%84%EC%BB%A4%EC%97%90-%EB%8C%80%ED%95%9C-%EC%96%B4%EB%96%A4-%EA%B2%83-1.-%EB%8F%84%EC%BB%A4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80)

[https://velog.io/@ckstn0777/도커란-무엇인가](https://velog.io/@ckstn0777/%EB%8F%84%EC%BB%A4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80)

도커 & 쿠버네티스 [https://wooono.tistory.com/109](https://wooono.tistory.com/109)
