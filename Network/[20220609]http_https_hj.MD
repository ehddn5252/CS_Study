## HTTP ( Hyper Text Transfer Protocol)

웹 상에서 클라이언트와 서버 간에 요청/응답(request/response)으로 정보를 주고 받을 수 있는 프로토콜이다.

애플리케이션 계층으로서 TCP/IP 위에서 작동하고, 80번 포트를 사용한다.

<br/>

## HTTP의 약점

- **평문(암호화 하지않은) 통신이기 때문에 도청이 가능하다.**
  - TCP/IP 구조의 통신내용은 통신 경로 도중에 엿볼 수 있다. (네트워크 상의 패킷을 수집하는 것만으로도 가능하다)
    → 암호화로 해결
  1. 통신 암호화
     SSL(Secure Socket Layer), TLS(Transport Layer Security)라는 프로토콜을 조합함으로써 HTTP 통신내용을 암호화 할 수 있다.
  2. 콘텐츠 암호화
     Request/Response Body의 메시지 body만 암호화하여 처리한다.
- **통신 상대를 확인하지 않기 때문에 위장이 가능하다.**

  - 누구나 request 할 수 있다.
    상대가 누구인지 확인하는 처리가 없기때문에 누구든지 requset를 보낼 수 있고, request가 오면 상대가 누구든지 response를 반환한다.

  → 상대를 확인하는 증명서

  SSL은 상대를 확인하는 수단으로 증명서를 제공한다.

- **완전성을 증명할 수 없기 때문에 변조가 가능하다.**
  - 수신한 내용이 다를지도 모른다. (정보의 정확성을 확인할 수 없다)
    request/response 도중에 변조되었는지 확인할 수 없다. (중간자 공격 (Man-in-the Middle))
    → MD5, SHA-1 등의 해시값을 확인하는 방법과 파일의 디지털 서명을 확인하는 방법
    but, 확실히 확인할 수 없기에 SSL의 다이제스트 기능을 활용한 HTTPS가 필요하다.

<br/>

## HTTPS (Hyper Text Transfer Protocol Secure)

HTTP over TLS, HTTP over SSL, HTTP Secure 등으로 불리는 HTTPS는
HTTP에 데이터 암호화가 추가된 프로토콜이다.

HTTP가 TCP와 직접 통신한다면, HTTPS가 SSL을 사용한 경우에 HTTP는 SSL과 통신하고, SSL이 TCP와 통신하게 된다. 즉, SSL이라는 껍질을 덮어쓴 HTTP가 HTTPS인 것이다.

TCP/IP 443번 포트를 사용한다.

SSL을 사용함으로써 HTTP는 암호화, 증명서, 완전성 보호를 이용할 수 있게된다.

- 공개키 암호화 방식을 사용한다.

송신측이 공개키를 사용해서 암호화를 하고, 암호화된 정보를 수신측이 비밀키를 사용해 복호화한다.

공개키는 공통키 암호에 비해서 처리속도가 느리기 때문에, 모든 통신에 공개키를 사용하는것은 비효율적이다
→ 공통키 암호와 공개키 암호의 하이브리드 암호 시스템이다. 공통키를 공개키 암호화 방식으로 교환한 다음에 다음부터의 통신은 공통키 암호를 사용하는 방식이다.

### 장점

- 네트워크 상에서 열람, 수정이 불가능하므로 안전하다.

### 단점

- 암호화를 하는 과정이 웹 서버에 부하를 준다.
- HTTPS는 설치 및 인증서를 유지하는데 추가 비용이 발생한다.
- HTTP에 비해 느리다.
- 인터넷 연결이 끊긴 경우 재인증 시간이 소요된다.
  - HTTP는 비연결형으로 웹 페이지를 보는 중 인터넷 연결이 끊겼다가 다시 연결되어도 페이지를 계속 볼 수 있다. 그러나 HTTPS의 경우에는 소켓(데이터를 주고 받는 경로) 자체에서 인증을 하기 때문에 인터넷 연결이 끊기면 소켓도 끊어져서 다시 HTTPS 인증이 필요하다.

* SSL 통신이 지연되는 이유

1. 통신속도가 떨어진다.
2. CPU나 메모리등의 리소스를 다량으로 소비함으로써 처리가 느려진다.

<br/>

**왜 항상 HTTPS를 사용하지 않는가??**

- 평문 통신에 비해서 암호화통신은 CPU나 메모리등 리소스가 많이 필요하기 때문이다.

- 통신할때마다 암호화하면 많은 리소스를 소비하기 때문에 한대당 처리할 수 있는 request의 수가 줄어들게 된다.

- 암호화가 필요한 컨텐츠만 암호화하여 처리한다.
