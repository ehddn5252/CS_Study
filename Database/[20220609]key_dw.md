# [DATABASE] Key

작성일 2022.06.05

학습 목표: Key의 경우에는 어떤 key가 있는 지, 그리고 각 키에 대한 특징, 유일성과 최소성에 대해서 공부해보자.

## Key

키란 무언가를 식별하는 고유한 식별자 기능을 한다.

## 키 간의 관계

![image](https://user-images.githubusercontent.com/51036842/172033017-7936acd6-a322-4e58-ac56-f7b96c9b77ec.png)

테이블 간의 관계를 조금 더 명확하게 하고 테이블 자체의 인덱스를 위해 설정된 장치로 기본키, 외래키, 후보키, 슈퍼키, 대체키가 있다.

*슈퍼키*는 유일성이 있고 그 안에 포함된 후보키는 최소성까지 갖춘 키이다. *후보키*중에서 기본키로 선택되지 못한 키는 대체키가 된다. 유일성은 중복되는 값은 없으며, 최소성은 필드를 조합하지 않고 최소 필드만 써서 키를 형성할 수 있는 것을 말한다.

## 속성 유일성과 최소성

- 유일성: 유일성이란 하나의 키로 특정 행을 바로 찾아낼수 있는 고유한 데이터 속성을 말한다. 예를 들어 전국에서 나를 구별할 수 있는 유일하고 고유한 속성인 주민번호가 있다.

- 최소성: 키를 구성하는 속성들 중 꼭 필요한 최소한의 속성들로만 키를 구성하는 성질, 즉 굳이 없어도 되는 속성들을 넣지 않는 것이다. 예를 들어 다음과 같은 키(주민번호, 이름, 나이)가 있다면 주민번호만으로도 구분할 수 있으니 이름과 나이는 필요가 없다. 이름과 나이를 빼고 주민번호만 키로 넣어서 최소성을 만족시킵니다.

## 기본 키

기본키(Primary Key)는 줄여 PK 또는 프라이머리키라고 많이 부르며, 유일성과 최소성을 만족하는 키이다.

<span style="color:red">기본키가 안되는 키</span>

| ID       | car name   |
| -------- | ---------- |
| PDT-0001 | 점퍼       |
| PDT-0002 | 람보르기니 |
| PDT-0002 | 람보르기니 |
| PDT-0003 | 벤츠       |

<span style="color:#63cc63">기본키가 되는 키</span>

| ID  | name   |
| --- | ------ |
| 1   | 덕배   |
| 2   | 손흥민 |
| 3   | 메시   |
| 4   | 카카   |

위와 같은 경우 ID를 PK로 삼으면 PDT-0002 가 중복되기 때문에 ID라는 필드가 기본키가 되면 안된다.

기본키 특징

- 후보키들 중에서 하나를 선탠한 키로 최소성과 유일성을 만족하는 속성이다.
- 테이블에서 기본키는 오직 1개만 지정할 수 있다.
- 기본키는 테이블 안에서 유일하게 각 행들을 구별할 수 있도록 쓰인다.
- 기본키는 NULL 값을 절대 가질 수 없고, 중복된 값을 가질 수 없다.
- 각 행들을 구별하려면 값이 없어선 안되고, 중복되어서도 안되기 때문이다.

기본키를 선택할 때 몇 가지 부적합한 경우가 있다.

- 널 값을 가질 수 있는 속성이 포함된 후보키는 기본키로 부적합하다.
  - 기본키가 널 값인 투플은 다른 투플들과 구별하여 접근하기 어려우므로 이러한 가능성이 있는 키는 기본키로 선택하지 않는 것이 좋다.
- 값이 자주 변경될 수 있는 속성이 포함된 기본키로 부적합하다.
  - 기본키는 다른 투플과 구별되는 값을 가지고 널 값은 허용하지 않으므로 이를 확인하는 작업이 필요하다. 그런데 값이 자주 변경되는 속성으로 구성된 후보키를 기본키로 선택하면 속성 값이 바뀔 때마다 기본키 값으로 적합한지 여부를 판단해야 하므로 번거롭다. 그러므로 값이 자주 변경되지 않는 속성으로 구성된 후보키를 기본키로 선택하는 것이 좋다.
- 단순한 후보키를 기본키로 선택한다.
  - 단순한 후보키는 자리수가 적은 정수나 단순 문자열인 속성으로 구성되거나, 구성하는 속성의 개수가 적은 후보키다. 데이터베이스를 이용하는 일반 사용자뿐만 아니라 데이터베이스를 실제로 처리하는 컴퓨터 시스템도 단순 값 처리를 선호한다.

## 외래키

외래키(Foreign Key)는 KF라고도 하며, 다른 테이블의 기본키를 그대로 참조하는 값으로 개체와의 관계를 식별하는 데 사용된다.

### 외래키 특징

- 데이터를 좀 더 조회하기가 쉬워진다.
- 참조될 테이블(A)이 먼저 만들어지고 참조하는 테이블(B)에 값이 입력되어야 한다.
- 외래키는 참조되는 테이블의 기본키와 동일한 키 속성을 가진다.
- 참조되는 부모테이블이 먼저 생성된 뒤 데이터를 넣고, 참조하는 자식 테이블이 다음에 생겨야 된다.
- 부모 테이블 먼저 삭제될 수 없다. 왜냐하면 부모테이블을 참조하는데 부모테이블이 삭제되면 자식테이블은 참조하는 것이 없어지기 때문에 외래키 오류가 생긴다.
- 외래키 관계에서 부모테이블을 삭제하려면 자식테이블을 먼저 삭제한 후 부모 테이블을 삭제해야 한다.

외래키는 중복되어도 괜찮다.

## 후보키

- 각 행을 유일하게 식별할 수 있는 최소한의 속성들의 집합이다. 후보키는 기본키가 될 수 있는 후보들이며 유일성과 최소성을 동시에 만족해야 한다.

## 대체키

대체키(alternate key)는 후보키가 두 개 이상일 경우 어느 하나를 기본키로 지정하고 남은 후보키들을 말한다.

## 슈퍼키

슈퍼키(super key)는 각 레코드를 유일하게 식별할 수 있는 유일성을 갖춘 키이다.

참고 자료

- 키들 https://jerryjerryjerry.tistory.com/49
- 유일성과 최소성 https://kosaf04pyh.tistory.com/201
